<%- include("partials/header.ejs") %>

<div class="edit-book">
  <h1>Edit Book</h1>

  <form class="edit-form" action="/book/<%= book.id %>/edit" method="POST">
    <input name="title" value="<%= book.title %>" placeholder="Title" required />
    <input name="author" value="<%= book.author %>" placeholder="Author" />
    <input name="illustrator" value="<%= book.illustrator %>" placeholder="Illustrator" />
    <input name="isbn" value="<%= book.isbn %>" placeholder="ISBN" />
    <input name="description" value="<%= book.description %>" placeholder="Description" />
    <input name="date_added" type="date" value="<%= book.date_added.toISOString().split('T')[0] %>" />

    <!-- Categories -->
    <fieldset>
      <legend>Edit categories:</legend>

      <% const allCategories = ["Nature", "Relationship", "Animals", "Emotions", "STEM", "Literacy", "Indigenous", "Special-days", "Transportation", "Environment", "Diversity", "Other"]; %>
      <% allCategories.forEach(category => { %>
        <label>
          <input type="checkbox" name="categories" value="<%= category %>" 
            <%= book.categories && book.categories.includes(category) ? "checked" : "" %> />
          <%= category %>
        </label><br />
      <% }); %>
    </fieldset>

    <button type="submit">Save Changes</button>
  </form>

  <a href="/book/<%= book.id %>" class="link-secondary">‚Üê Back to book</a>
</div>

<%- include("partials/footer.ejs") %>
